From ea2f1638d8c3edbe491e3f9dc9e2fcd6751a39f2 Mon Sep 17 00:00:00 2001
From: Joshua Strobl <me@joshuastrobl.com>
Date: Tue, 25 Apr 2023 16:45:21 +0300
Subject: [PATCH] implement change to new CDN-backed repo

---
 pisi/db/repodb.py | 2 +-
 pisi/urlcheck.py  | 8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/pisi/db/repodb.py b/pisi/db/repodb.py
index 06f9acd..c62a906 100644
--- a/pisi/db/repodb.py
+++ b/pisi/db/repodb.py
@@ -171,7 +171,7 @@ def init(self):
         self.repoorder = RepoOrder()
 
         if len(self.repoorder.repos) == 0:
-            repo = pisi.db.repodb.Repo(pisi.uri.URI("https://mirrors.rit.edu/solus/packages/shannon/eopkg-index.xml.xz"))
+            repo = pisi.db.repodb.Repo(pisi.uri.URI("https://cdn.getsol.us/repo/shannon/eopkg-index.xml.xz"))
             ctx.ui.warning("No repository found. Automatically adding Solus stable.")
             self.add_repo("Solus", repo, ctx.get_option('at'))
 
diff --git a/pisi/urlcheck.py b/pisi/urlcheck.py
index 9d133dc..6747907 100644
--- a/pisi/urlcheck.py
+++ b/pisi/urlcheck.py
@@ -1,9 +1,9 @@
 import pisi.context as ctx
 
 def switch_from_legacy(repo_url):
-    if repo_url == "https://packages.solus-project.com/shannon/eopkg-index.xml.xz":
-        repo_url = "https://mirrors.rit.edu/solus/packages/shannon/eopkg-index.xml.xz"
-    elif repo_url == "https://packages.solus-project.com/unstable/eopkg-index.xml.xz":
-        repo_url = "https://mirrors.rit.edu/solus/packages/unstable/eopkg-index.xml.xz"
+    if repo_url == "https://mirrors.rit.edu/solus/packages/shannon/eopkg-index.xml.xz":
+        repo_url = "https://cdn.getsol.us/repo/shannon/eopkg-index.xml.xz"
+    elif repo_url == "https://mirrors.rit.edu/solus/packages/unstable/eopkg-index.xml.xz":
+        repo_url = "https://cdn.getsol.us/repo/unstable/eopkg-index.xml.xz"
 
     return repo_url
